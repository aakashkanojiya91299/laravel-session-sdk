# Laravel Session SDK - Project Structure

```
laravel-session-sdk/
â”‚
â”œâ”€â”€ ğŸ“¦ Package Configuration
â”‚   â”œâ”€â”€ package.json              # NPM package configuration
â”‚   â”œâ”€â”€ tsconfig.json             # TypeScript compiler config
â”‚   â”œâ”€â”€ .gitignore                # Git ignore rules
â”‚   â”œâ”€â”€ .npmignore                # NPM publish ignore rules
â”‚   â”œâ”€â”€ .eslintrc.json            # ESLint configuration
â”‚   â””â”€â”€ .prettierrc               # Prettier code formatting
â”‚
â”œâ”€â”€ ğŸ“„ Documentation
â”‚   â”œâ”€â”€ README.md                 # Main documentation
â”‚   â”œâ”€â”€ GETTING_STARTED.md        # Quick start guide
â”‚   â”œâ”€â”€ LICENSE                   # MIT License
â”‚   â””â”€â”€ PROJECT_STRUCTURE.md      # This file
â”‚
â”œâ”€â”€ ğŸ“ src/                       # Source code (TypeScript)
â”‚   â”‚
â”‚   â”œâ”€â”€ index.ts                  # Main entry point (exports)
â”‚   â”œâ”€â”€ LaravelSessionClient.ts   # Main SDK class
â”‚   â”‚
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts              # TypeScript type definitions
â”‚   â”‚
â”‚   â”œâ”€â”€ decoders/
â”‚   â”‚   â”œâ”€â”€ PhpSerializer.ts      # PHP serialization handler
â”‚   â”‚   â””â”€â”€ SessionDecoder.ts     # Session payload decoder
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ StoreInterface.ts     # Store interface definition
â”‚   â”‚   â”œâ”€â”€ DatabaseStore.ts      # MySQL/PostgreSQL store
â”‚   â”‚   â””â”€â”€ RedisStore.ts         # Redis store
â”‚   â”‚
â”‚   â”œâ”€â”€ validators/
â”‚   â”‚   â””â”€â”€ SessionValidator.ts   # Session validation logic
â”‚   â”‚
â”‚   â””â”€â”€ middleware/
â”‚       â”œâ”€â”€ express.ts            # Express.js middleware
â”‚       â”œâ”€â”€ nextjs.ts             # Next.js middleware
â”‚       â””â”€â”€ nestjs.ts             # NestJS guard
â”‚
â”œâ”€â”€ ğŸ“ examples/                  # Usage examples
â”‚   â”‚
â”‚   â”œâ”€â”€ express/
â”‚   â”‚   â””â”€â”€ server.js             # Express.js example
â”‚   â”‚
â”‚   â”œâ”€â”€ nextjs/
â”‚   â”‚   â”œâ”€â”€ pages/api/auth/user.ts
â”‚   â”‚   â”œâ”€â”€ lib/laravelSession.ts
â”‚   â”‚   â””â”€â”€ hooks/useLaravelAuth.ts
â”‚   â”‚
â”‚   â””â”€â”€ nestjs/
â”‚       â””â”€â”€ (to be added)
â”‚
â”œâ”€â”€ ğŸ“ test/                      # Test files
â”‚   â””â”€â”€ (to be added)
â”‚
â””â”€â”€ ğŸ“ dist/                      # Compiled output (generated)
    â”œâ”€â”€ index.js
    â”œâ”€â”€ index.d.ts
    â””â”€â”€ ... (generated files)
```

## File Descriptions

### Root Configuration Files

- **package.json**: NPM package metadata, dependencies, scripts
- **tsconfig.json**: TypeScript compilation settings
- **.gitignore**: Files to exclude from git
- **.npmignore**: Files to exclude from NPM package
- **.eslintrc.json**: Code linting rules
- **.prettierrc**: Code formatting rules

### Source Files (src/)

#### Core Files

- **index.ts**: Main entry point, exports all public APIs
- **LaravelSessionClient.ts**: Main SDK class, initializes stores and validators

#### Types (src/types/)

- **index.ts**: All TypeScript interfaces and types

#### Decoders (src/decoders/)

- **PhpSerializer.ts**: Converts PHP serialized data to JavaScript objects
- **SessionDecoder.ts**: Decodes Laravel session payload, extracts user ID, permissions

#### Stores (src/stores/)

- **StoreInterface.ts**: Interface that all stores must implement
- **DatabaseStore.ts**: Reads sessions from MySQL/PostgreSQL
- **RedisStore.ts**: Reads sessions from Redis

#### Validators (src/validators/)

- **SessionValidator.ts**: Complete session validation logic (expiry, user, role, 2FA)

#### Middleware (src/middleware/)

- **express.ts**: Express.js authentication middleware
- **nextjs.ts**: Next.js API route helpers
- **nestjs.ts**: NestJS guard for route protection

### Examples (examples/)

Complete working examples for different frameworks:

- **express/server.js**: Full Express.js server with authentication
- **nextjs/**: Next.js integration with API routes and React hooks
- **nestjs/**: (To be added)

### Build Output (dist/)

Generated by TypeScript compiler:
- **\*.js**: Compiled JavaScript files
- **\*.d.ts**: TypeScript declaration files
- **\*.map**: Source maps for debugging

## Key Files by Use Case

### For Package Maintainers

```
package.json           # Update version, dependencies
tsconfig.json          # Modify compilation settings
src/**/*.ts            # Add new features
test/**/*.test.ts      # Add tests
README.md              # Update documentation
```

### For Package Users

```
dist/index.js          # Main entry (after npm install)
dist/index.d.ts        # Type definitions
README.md              # Usage documentation
examples/              # Copy-paste examples
```

### For Contributors

```
src/                   # Source code to modify
examples/              # Add more examples
test/                  # Add tests
CONTRIBUTING.md        # (To be added)
```

## Build Process

```
src/**/*.ts
    â†“ (tsc)
dist/**/*.js + *.d.ts
    â†“ (npm publish)
NPM Registry
    â†“ (npm install)
node_modules/@yourorg/laravel-session-sdk/
```

## Development Workflow

1. Edit source in `src/`
2. Run `npm run build` to compile
3. Test in `examples/`
4. Run `npm run lint` and `npm run format`
5. Commit changes
6. Update version in `package.json`
7. Run `npm publish`

## File Count Summary

- TypeScript source files: 14
- Example files: 4
- Config files: 6
- Documentation files: 4
- **Total**: ~28 files (excluding node_modules and dist)

## Dependencies

### Runtime Dependencies

- `php-serialize`: PHP serialization/unserialization

### Peer Dependencies (Optional)

- `mysql2`: MySQL database driver
- `redis`: Redis client

### Dev Dependencies

- `typescript`: TypeScript compiler
- `@types/node`: Node.js type definitions
- `eslint`: Code linting
- `prettier`: Code formatting
- `jest`: Testing framework
